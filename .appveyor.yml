image: Visual Studio 2019
platform:
     -x86
     -x64

build_script:
 - cmd: cd hello_world_application
 - cmd: cmake -H. -B_build
 - cmd: cmake --build _build
 - cmd: cmake --build _build --target hello_world
 - cmd: _build\Debug\hello_world.exe
 - cmd: echo "Testing hello_world is done"
 - cmd: cd ..
 - cmd: cd solver_application
 - cmd: cmake -H. -B_build
 - cmd: cmake --build _build
 - cmd: cmake --build _build --target solver --config Release
 - cmd: echo "Testing solver is done"
 - cmd: cd _build
 - cmd: cpack -G WIX

   deploy:
    description: 'MSI release'
    provider: GitHub
    auth_token:
        secure: 47878be1279814a1e282082bc90e519eab35fea9
    artifact: solver_application\_build\*.msi
    draft: false
    on:
        branch: master
        APPVEYOR_REPO_TAG: true
