language: cpp
jobs:
  include:
    - os: osx
      script:
        - cmake -H. -B_build
        - cmake --build _build
        - cd _build
        - cpack -G DragNDrop
        - cd ..
    - os: linux
      script:
        - cmake -H. -B_build
        - cmake --build _build
        - cd _build
        - cpack -G DEB
        - cpack -G RPM
        - cd ..
addons:
  apt:
    sources:

    packages:
      - cmake
      - cmake-data
      - rpm
deploy:
  provider: releases
  edge: true
  api_key: Yc1W9wDSn8pEvWkhHQHvZA
  file:
    - solver_application/_build/solver-0.1.0.-Darwin.dmg
    - solver_application/_build/solver-0.1.0.-Linux.deb
    - solver_application/_build/solver-0.1.0.-Linux.rpm
  cleanup: false
  on:
    tags: true
